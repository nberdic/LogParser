<Window x:Class="WPFLogFilter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:my="http://schemas.microsoft.com/wpf/2008/toolkit"
        xmlns:local="clr-namespace:WPFLogFilter"
        mc:Ignorable="d" SizeToContent="Width" Height="Auto" Width="Auto" MinHeight="500" MinWidth="500"
        Title="{Binding NameAndVersion}"
        
        DataContext="{Binding Main,Source={StaticResource Locator}}" WindowStartupLocation="Manual">

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <Style x:Key="ListViewStyle" TargetType="{x:Type GridViewColumnHeader}">
            <Setter Property="HorizontalContentAlignment" Value="Center" />
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="20"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="20"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="20"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="auto"/>
            <ColumnDefinition Width="20"/>
        </Grid.ColumnDefinitions>

        <Grid Grid.Row="0" Grid.Column="1">
            <Menu >
                <MenuItem Header="_Open" Command="{Binding ClickMenuCommand}">
                    <!--<MenuItem Header="_Open" Command="{Binding ClickMenuCommand}"/>
                    <Separator />
                    <MenuItem Header="_Exit" />-->
                </MenuItem>
            </Menu>
        </Grid>

        <Grid Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="8">
            <!--<Border BorderBrush="Black" BorderThickness="2">
                <TextBlock Text="Inside border"/>
            </Border>-->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="*"/>

            </Grid.ColumnDefinitions>

            <TextBlock Grid.Column="1" Margin="0,0,40,0" Text="ID" Visibility="{Binding Path=IdTrigger, Mode=OneWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}"/>
            <TextBlock Grid.Column="2" Margin="0,0,20,0" Text="DATE/TIME - FORMAT(HH:mm:ss)" Visibility="{Binding Path=DateTimeTrigger, Mode=OneWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}" />
            <TextBlock Grid.Column="3" Margin="0,0,42,0" Text="THREADID" Visibility="{Binding Path=ThreadIdTrigger, Mode=OneWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}" />
            <TextBlock Grid.Column="4" Margin="0,0,20,0" Text="LOGLEVEL" Visibility="{Binding Path=LogLevelTrigger, Mode=OneWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}" />
            <TextBlock Grid.Column="5" Margin="0,0,20,0" Text="EVENTID" Visibility="{Binding Path=EventIdTrigger, Mode=OneWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}" />
            <TextBlock Grid.Column="6" Margin="0,0,20,0" Text="TEXT" Visibility="{Binding Path=TextTrigger, Mode=OneWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}" />
            <!--<TextBlock Grid.Column="9" Margin="0,0,20,0" Text="Timer:"/>
            <TextBlock Grid.Column="10" Margin="0,0,20,0" Text="{Binding Path=StopWatch,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"/>-->

            <Button Grid.Column="9" Command="{Binding OpenNotepadCommand}" Content="Open in notepad" MinHeight="10" MinWidth="10" Visibility="{Binding Path=OpenFileTrigger,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}">
                
            </Button>



            <TextBlock Grid.Column="7" Text="Case Sensitive" Margin="10,0,10,0" Visibility="{Binding Path=TextTrigger,Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}"/>
            <CheckBox Grid.Column="8" Margin="0,0,10,0" IsChecked="{Binding Path=CaseSensitiveCheckBox,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding Path=TextTrigger,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}"/>

        </Grid>

        <Grid Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="8">
            <Grid.ColumnDefinitions>

                <ColumnDefinition Width="auto"/>

                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>


                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="auto"/>


                <ColumnDefinition MinWidth="500" Width="auto"/>
                <ColumnDefinition Width="auto"/>
                <ColumnDefinition Width="*"/>

            </Grid.ColumnDefinitions>


            <TextBox Grid.Column="0" MinWidth="45" Margin="0,0,15,0" Text="{Binding Path=IdNumberSearch,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding Path=IdTrigger, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}"/>

            <TextBox Grid.Column="1" MinWidth="70" TextAlignment="Center" Text="{Binding Path=DateTimeSearch1,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding Path=DateTimeTrigger, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}"/>
            <TextBlock Grid.Column="2" Text=" - " Visibility="{Binding Path=DateTimeTrigger, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}"/>
            <TextBox Grid.Column="3" MinWidth="73" Margin="0,0,30,0" TextAlignment="Center" Text="{Binding Path=DateTimeSearch2,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding Path=DateTimeTrigger, Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}"/>


            <TextBox Grid.Column="4" Margin="0,0,32,0" MinWidth="70" TextAlignment="Center" Text="{Binding Path=ThreadIdSearch,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding Path=ThreadIdTrigger,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}" />



            <ComboBox Grid.Column="5" MinWidth="60" Height="35" Margin="0,0,19,0" Name="LogLevel" SelectedValue="{Binding Path=LogLevelValues,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ItemsSource="{Binding LogLevelEnumList}" Visibility="{Binding Path=LogLevelTrigger,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}"
                      SelectedIndex="0"/>

            <TextBox Grid.Column="6" Margin="0,0,18,0" MinWidth="50" TextAlignment="Center" Text="{Binding Path=EventIdSearch,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding Path=EventIdTrigger,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}"/>


            <TextBox Grid.Column="7" Text="{Binding Path=LogTextSearch,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" Visibility="{Binding Path=TextTrigger,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter},FallbackValue=Collapsed}"/>

        </Grid>

        <ScrollViewer Grid.Row="3" Grid.Column="1" VerticalScrollBarVisibility="Auto" Margin="0,10,0,0">
            <ItemsControl ItemsSource="{Binding ListLoadLine, Mode= TwoWay}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Grid>
                            <Grid.ColumnDefinitions>

                                <ColumnDefinition Width="80"/>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="65"/>
                                <ColumnDefinition Width="auto" />
                                <!--MaxWidth="300"-->
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="auto"/>
                                <ColumnDefinition Width="*"/>

                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="25"/>
                            </Grid.RowDefinitions>
                            <TextBlock Grid.Row="1" Grid.Column="0" TextAlignment="Left">
                                    <Run Text="{Binding Id,Mode=OneWay}" />
                                    <Run Text="." />
                            </TextBlock>
                            <TextBlock Grid.Row="1" Margin="0,0,57,0" Grid.Column="1" Text="{Binding DateTime,Mode=OneWay, StringFormat='{}{0:dd-MM-yyyy HH:mm:ss}'}">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Setter Property="Visibility" Value="Visible"/>
                                        <Style.Triggers>
                                            <Trigger Property="Text" Value="01-01-0001 00:00:00">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                            <TextBlock Grid.Row="1" Margin="0,0,43,0" Grid.Column="3" Text="{Binding ThreadId,Mode=OneWay}">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Style.Triggers>
                                            <Trigger Property="Text" Value="">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>

                            <TextBlock Grid.Row="1" Margin="5,0,5,0" Grid.Column="4" HorizontalAlignment="Center" Text="{Binding LogLevel,Mode=OneWay}"/>

                            <TextBlock Grid.Row="1" Grid.Column="5" MinWidth="70" TextAlignment="Center" Text="{Binding Path=EventId,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}">
                                <TextBlock.Style>
                                    <Style TargetType="TextBlock">
                                        <Style.Triggers>
                                            <Trigger Property="Text" Value="-1">
                                                <Setter Property="Visibility" Value="Collapsed" />
                                            </Trigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                            <TextBlock Grid.Row="1"
                                 Margin="12,0,0,0" Grid.Column="6" Text="{Binding Text,TargetNullValue='Empty line or line of unknown format'}"/>

                            <Button  Grid.Row="1" Grid.Column="7" MinWidth="10" MinHeight="10">
                                <Button.Style>
                                    <Style TargetType="Button">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding DateTime}" Value="01-01-0001 00:00:00">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </Button.Style>
                              
                                <Grid>
                                    <Image Source="Resources\warning.png" />
                                    <!--<TextBlock Text="Warning" />-->
                                </Grid>
                                <Button.ToolTip>
                                    <ToolTip>
                                        <StackPanel Width="300">
                                            <StackPanel Orientation="Horizontal" Background="Tan" Width="250">
                                                <Image Source="Resources\warning.png" Margin="10 5"></Image>
                                                <!--<Label Content="Warning" Margin="10 5" FontSize="20" FontWeight="Bold"></Label>-->
                                            </StackPanel>
                                            <TextBlock Text="This line is just a string or not in proper format" FontSize="14" FontWeight="ExtraBold" TextWrapping="WrapWithOverflow"></TextBlock>
                                            <!--<Line Stroke="Gray" StrokeThickness="2" X2="200"></Line>-->
                                        </StackPanel>
                                    </ToolTip>
                                </Button.ToolTip>
                            </Button>

                        </Grid>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </ScrollViewer>


    </Grid>

</Window>
